# Create and activate a virtual environment using miniconda
# If you have not already done so, create a 'workspace' at resources.web.cern.ch and increase its capacity to at least 20-50 GB
# cd <afs work directory: you need some disk space for this!>
wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh

# Source Bashrc for changes to take effect and for the 'conda' command
source ~/.bashrc
conda create -n trackingenv python=2.7
conda activate trackingenv

# Clone the repository into your local directory
git clone https://github.com/SwapneelM/TrackingNtuples.git

# Change directory into where the data is stored
cd TrackingNtuples/TrackingNtuples/scripts

# Copy the extracted data into this directory and rename it for the notebook to use
cp /afs/cern.ch/work/s/smehta/public/for_toluwase/outfile-ttbar-100.root .

# Install the requirements for the project
pip install -r requirements.txt

# Run a Jupyter Notebook on LXPlus
# Any 5-digit port ID should work (for some reason 4-digit doesn't work)
# Obviously the upper limit is port ID 65535
jupyter notebook --ip=127.0.0.1 --no-browser --port 64002

# Now from your local machine run the following command to tunnel the remote port 64002
# onto your local machine's port 10000 and then access it on your web browser at '127.0.0.1:10000'
# ssh -nNT -L 127.0.0.1:10000:127.0.0.1:64002 [cern-username]@lxplus[number].cern.ch


